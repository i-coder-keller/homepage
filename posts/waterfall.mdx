---
title: 瀑布流的实现、优化与扩展
date: 2022-11-14
description: 双列瀑布流的实现、多列瀑布流的实现以及图片加载优化
---

### 前言

瀑布流布局对前端来说是非常熟悉的场景，最近工作上有相关需求，于是便找了一下相关插件，发现都不是太完美，于是决心自己手写一个瀑布流，我的遇到的场景是图片大小不同，但是图片描述高度是相同的。如下图

![imageswaterfall-demo](https://image.liuyongzhi.cn/imageswaterfall-demo.png)

### 双列瀑布流

> 这里使用`javascript`搭配 `flex`布局实现

首先我们需要构建一个瀑布流框架，这里为了方便`css`部分使用[tailwindcss](https://tailwindcss.com/)完成

![瀑布流容器](https://image.liuyongzhi.cn/imageswater-code-01.png)

<center><font face="黑体" size="1" >瀑布流容器</font></center>

![图片Card](https://image.liuyongzhi.cn/imageswater-code-02.png)

<center><font face="黑体" size="1" >图片Card</font></center>

接下来是重点，我们需要根据服务端返回的数据渲染列表。在渲染之前我们需要先进行计算当前图片应该是放在左列和右列，由于图片原尺寸不一致所以我们要进行系数换算


<Waterfall />